import{n as Q,l as ce,o as ie,e as X,_ as de,R as me,u as pe,c as fe,d as _e,p as ve,i as ge,P as be,j as he,k as ye}from"./business-D4sN_9ms.js";import{d as K,az as G,aA as W,a as z,$ as t,aI as O,ae as Y,o as N,c as F,w as l,f as o,g as M,t as w,h as e,e as P,aC as Z,B as V,aE as ee,aF as L,r as ke,b as J,J as oe,K as te,aG as j,Q as we,I as le,aJ as xe,aK as Ae,aH as Ce}from"./index-CAvhOcyu.js";import{u as Se,a as De,_ as ae,F as ne}from"./form-pD8JAqzH.js";import{S as Re,C as se}from"./index-B_GEvyYv.js";import{_ as Ie,a as Me}from"./round-refresh-AjcWVXly.js";import{_ as Ne,a as Be}from"./index-D9yWjVwG.js";import{T as Te}from"./index-D9Z3yK7p.js";import"./Col-DKj0WJZm.js";import"./responsiveObserve-z8r-WqWM.js";const Ue={class:"flex-y-center gap-16px pb-12px"},$e=K({name:"MenuAuthModal",__name:"menu-auth-modal",props:G({roleId:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:["update:visible"],setup(v){const x=v,u=W(v,"visible");function d(){u.value=!1}const g=z(()=>t("common.edit")+t("page.manage.role.menuAuth")),k=O("");async function B(){console.log(x.roleId),k.value="home"}async function c(s){k.value=s}const b=O([]);async function h(){const{error:s,data:a}=await ce();s||(b.value=a)}const y=z(()=>b.value.map(a=>({label:a,value:a}))),_=O([]);async function m(){const{error:s,data:a}=await ie();s||(_.value=D(a))}function D(s){return s.map(a=>{const{id:T,label:$}=a;return a.children?{key:T,title:$,children:D(a.children)}:{key:T,title:$}})}const n=O([]);async function R(){console.log(x.roleId),n.value=[1,2,3,4,5,6,7,8,9,10,11,12,14,15,16,17,18,19,20,21]}function C(){var s,a;console.log(n.value,x.roleId),(a=(s=window.$message)==null?void 0:s.success)==null||a.call(s,t("common.modifySuccess")),d()}async function U(){B(),h(),await m(),await R()}return Y(u,s=>{s&&U()}),(s,a)=>{const T=Z,$=Q,A=V,i=ee;return N(),F(i,{open:u.value,"onUpdate:open":a[1]||(a[1]=r=>u.value=r),title:g.value,class:"w-480px"},{footer:l(()=>[o(A,{size:"small",class:"mt-16px",onClick:d},{default:l(()=>[M(w(e(t)("common.cancel")),1)]),_:1}),o(A,{type:"primary",size:"small",class:"mt-16px",onClick:C},{default:l(()=>[M(w(e(t)("common.confirm")),1)]),_:1})]),default:l(()=>[P("div",Ue,[P("div",null,w(e(t)("page.manage.menu.home")),1),o(T,{value:k.value,options:y.value,class:"w-240px","onUpdate:value":c},null,8,["value","options"])]),o($,{"checked-keys":n.value,"onUpdate:checkedKeys":a[0]||(a[0]=r=>n.value=r),"tree-data":_.value,checkable:"",height:280,class:"h-280px"},null,8,["checked-keys","tree-data"])]),_:1},8,["open","title"])}}}),Fe=K({name:"ButtonAuthModal",__name:"button-auth-modal",props:G({roleId:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:["update:visible"],setup(v){const x=v,u=W(v,"visible");function d(){u.value=!1}const g=z(()=>t("common.edit")+t("page.manage.role.buttonAuth")),k=O([]);async function B(){k.value=[{key:1,title:"button1",code:"code1"},{key:2,title:"button2",code:"code2"},{key:3,title:"button3",code:"code3"},{key:4,title:"button4",code:"code4"},{key:5,title:"button5",code:"code5"},{key:6,title:"button6",code:"code6"},{key:7,title:"button7",code:"code7"},{key:8,title:"button8",code:"code8"},{key:9,title:"button9",code:"code9"},{key:10,title:"button10",code:"code10"}]}const c=O([]);async function b(){console.log(x.roleId),c.value=[1,2,3,4,5]}function h(){var _,m;console.log(c.value,x.roleId),(m=(_=window.$message)==null?void 0:_.success)==null||m.call(_,t("common.modifySuccess")),d()}function y(){B(),b()}return y(),(_,m)=>{const D=Q,n=V,R=ee;return N(),F(R,{open:u.value,"onUpdate:open":m[1]||(m[1]=C=>u.value=C),title:g.value,class:"w-480px"},{footer:l(()=>[o(n,{size:"small",class:"mt-16px",onClick:d},{default:l(()=>[M(w(e(t)("common.cancel")),1)]),_:1}),o(n,{type:"primary",size:"small",class:"mt-16px",onClick:h},{default:l(()=>[M(w(e(t)("common.confirm")),1)]),_:1})]),default:l(()=>[o(D,{"checked-keys":c.value,"onUpdate:checkedKeys":m[0]||(m[0]=C=>c.value=C),"tree-data":k.value,checkable:"",height:280,class:"h-280px"},null,8,["checked-keys","tree-data"])]),_:1},8,["open","title"])}}}),Oe={class:"flex-y-center justify-end gap-12px"},ze=K({name:"RoleOperateDrawer",__name:"role-operate-drawer",props:G({operateType:{},rowData:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:G(["submitted"],["update:visible"]),setup(v,{emit:x}){const u=v,d=x,g=W(v,"visible"),{formRef:k,validate:B,resetFields:c}=Se(),{defaultRequiredRule:b}=De(),{bool:h,setTrue:y}=L(),{bool:_,setTrue:m}=L(),D=z(()=>({add:t("page.manage.role.addRole"),edit:t("page.manage.role.editRole")})[u.operateType]),n=ke(R());function R(){return{roleName:"",roleCode:"",roleDesc:"",status:"1"}}const C={roleName:b,roleCode:b,status:b},U=z(()=>{var A;return((A=u.rowData)==null?void 0:A.id)||-1}),s=z(()=>u.operateType==="edit");function a(){n.value=R(),u.operateType==="edit"&&u.rowData&&Object.assign(n.value,u.rowData)}function T(){g.value=!1}async function $(){var A;await B(),(A=window.$message)==null||A.success(t("common.updateSuccess")),T(),d("submitted")}return Y(g,()=>{g.value&&(a(),c())}),(A,i)=>{const r=le,p=ae,S=me,E=de,H=ne,I=V,ue=Re,re=xe;return N(),F(re,{open:g.value,"onUpdate:open":i[6]||(i[6]=f=>g.value=f),title:D.value,width:360},{footer:l(()=>[P("div",Oe,[o(I,{onClick:T},{default:l(()=>[M(w(e(t)("common.cancel")),1)]),_:1}),o(I,{type:"primary",onClick:$},{default:l(()=>[M(w(e(t)("common.confirm")),1)]),_:1})])]),default:l(()=>[o(H,{ref_key:"formRef",ref:k,layout:"vertical",model:n.value,rules:C},{default:l(()=>[o(p,{label:e(t)("page.manage.role.roleName"),name:"roleName"},{default:l(()=>[o(r,{value:n.value.roleName,"onUpdate:value":i[0]||(i[0]=f=>n.value.roleName=f),placeholder:e(t)("page.manage.role.form.roleName")},null,8,["value","placeholder"])]),_:1},8,["label"]),o(p,{label:e(t)("page.manage.role.roleCode"),name:"roleCode"},{default:l(()=>[o(r,{value:n.value.roleCode,"onUpdate:value":i[1]||(i[1]=f=>n.value.roleCode=f),placeholder:e(t)("page.manage.role.form.roleCode")},null,8,["value","placeholder"])]),_:1},8,["label"]),o(p,{label:e(t)("page.manage.role.roleStatus"),name:"status"},{default:l(()=>[o(E,{value:n.value.status,"onUpdate:value":i[2]||(i[2]=f=>n.value.status=f)},{default:l(()=>[(N(!0),J(te,null,oe(e(X),f=>(N(),F(S,{key:f.value,value:f.value},{default:l(()=>[M(w(e(t)(f.label)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1},8,["label"]),o(p,{label:e(t)("page.manage.role.roleDesc"),name:"roleDesc"},{default:l(()=>[o(r,{value:n.value.roleDesc,"onUpdate:value":i[3]||(i[3]=f=>n.value.roleDesc=f),placeholder:e(t)("page.manage.role.form.roleDesc")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"]),s.value?(N(),F(ue,{key:0},{default:l(()=>[o(I,{onClick:e(y)},{default:l(()=>[M(w(e(t)("page.manage.role.menuAuth")),1)]),_:1},8,["onClick"]),o($e,{visible:e(h),"onUpdate:visible":i[4]||(i[4]=f=>j(h)?h.value=f:null),"role-id":U.value},null,8,["visible","role-id"]),o(I,{onClick:e(m)},{default:l(()=>[M(w(e(t)("page.manage.role.buttonAuth")),1)]),_:1},8,["onClick"]),o(Fe,{visible:e(_),"onUpdate:visible":i[5]||(i[5]=f=>j(_)?_.value=f:null),"role-id":U.value},null,8,["visible","role-id"])]),_:1})):we("",!0)]),_:1},8,["open","title"])}}}),Pe={class:"w-full flex-y-center justify-end gap-12px"},Ve={class:"ml-8px"},je={class:"ml-8px"},Ge=K({name:"RoleSearch",__name:"role-search",props:{model:{required:!0},modelModifiers:{}},emits:G(["reset","search"],["update:model"]),setup(v,{emit:x}){const u=x,d=W(v,"model");function g(){u("reset")}function k(){u("search")}return(B,c)=>{const b=le,h=ae,y=Ne,_=Ae,m=Z,D=Ie,n=V,R=Me,C=Be,U=ne,s=se;return N(),F(s,{title:e(t)("common.search"),bordered:!1,class:"card-wrapper"},{default:l(()=>[o(U,{model:d.value,"label-width":80},{default:l(()=>[o(C,{gutter:[16,16],wrap:""},{default:l(()=>[o(y,{span:24,md:12,lg:6},{default:l(()=>[o(h,{label:e(t)("page.manage.role.roleName"),name:"roleName",class:"m-0"},{default:l(()=>[o(b,{value:d.value.roleName,"onUpdate:value":c[0]||(c[0]=a=>d.value.roleName=a),placeholder:e(t)("page.manage.role.form.roleName")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),o(y,{span:24,md:12,lg:6},{default:l(()=>[o(h,{label:e(t)("page.manage.role.roleCode"),name:"roleCode",class:"m-0"},{default:l(()=>[o(b,{value:d.value.roleCode,"onUpdate:value":c[1]||(c[1]=a=>d.value.roleCode=a),placeholder:e(t)("page.manage.role.form.roleCode")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),o(y,{span:24,md:12,lg:6},{default:l(()=>[o(h,{label:e(t)("page.manage.role.roleStatus"),name:"status",class:"m-0"},{default:l(()=>[o(m,{value:d.value.status,"onUpdate:value":c[2]||(c[2]=a=>d.value.status=a),placeholder:e(t)("page.manage.role.form.roleStatus"),"allow-clear":""},{default:l(()=>[(N(!0),J(te,null,oe(e(X),a=>(N(),F(_,{key:a.value,value:a.value},{default:l(()=>[M(w(e(t)(a.label)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),o(y,{span:24,md:12,lg:6},{default:l(()=>[o(h,{class:"m-0"},{default:l(()=>[P("div",Pe,[o(n,{onClick:g},{icon:l(()=>[o(D,{class:"align-sub text-icon"})]),default:l(()=>[P("span",Ve,w(e(t)("common.reset")),1)]),_:1}),o(n,{type:"primary",ghost:"",onClick:k},{icon:l(()=>[o(R,{class:"align-sub text-icon"})]),default:l(()=>[P("span",je,w(e(t)("common.search")),1)]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])}}}),Ke={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"};function q(v){return typeof v=="function"||Object.prototype.toString.call(v)==="[object Object]"&&!Ce(v)}const Ze=K({name:"manage_role",__name:"index",setup(v){const{tableWrapperRef:x,scrollConfig:u}=pe(),{columns:d,columnChecks:g,data:k,loading:B,getData:c,getDataByPage:b,mobilePagination:h,searchParams:y,resetSearchParams:_}=fe({apiFn:ve,apiParams:{current:1,size:10,status:void 0,roleName:void 0,roleCode:void 0},columns:()=>[{key:"index",dataIndex:"index",title:t("common.index"),width:64,align:"center"},{key:"roleName",dataIndex:"roleName",title:t("page.manage.role.roleName"),align:"center",minWidth:120},{key:"roleCode",dataIndex:"roleCode",title:t("page.manage.role.roleCode"),align:"center",minWidth:120},{key:"roleDesc",dataIndex:"roleDesc",title:t("page.manage.role.roleDesc"),minWidth:120},{key:"status",dataIndex:"status",title:t("page.manage.role.roleStatus"),align:"center",width:100,customRender:({record:r})=>{if(r.status===null)return null;const p={1:"success",2:"warning"},S=t(ge[r.status]);return o(Te,{color:p[r.status]},q(S)?S:{default:()=>[S]})}},{key:"operate",title:t("common.operate"),align:"center",width:130,customRender:({record:r})=>{let p,S;return o("div",{class:"flex-center gap-8px"},[o(V,{type:"primary",ghost:!0,size:"small",onClick:()=>i(r.id)},q(p=t("common.edit"))?p:{default:()=>[p]}),o(be,{onConfirm:()=>A(r.id),title:t("common.confirmDelete")},{default:()=>[o(V,{danger:!0,size:"small"},q(S=t("common.delete"))?S:{default:()=>[S]})]})])}}]}),{drawerVisible:m,operateType:D,editingData:n,handleAdd:R,handleEdit:C,checkedRowKeys:U,rowSelection:s,onBatchDeleted:a,onDeleted:T}=_e(k,c);async function $(){a()}function A(r){console.log(r),T()}function i(r){C(r)}return(r,p)=>{const S=he,E=ye,H=se;return N(),J("div",Ke,[o(Ge,{model:e(y),"onUpdate:model":p[0]||(p[0]=I=>j(y)?y.value=I:null),onReset:e(_),onSearch:e(b)},null,8,["model","onReset","onSearch"]),o(H,{title:e(t)("page.manage.role.title"),bordered:!1,"body-style":{flex:1,overflow:"hidden"},class:"flex-col-stretch sm:flex-1-hidden card-wrapper"},{extra:l(()=>[o(S,{columns:e(g),"onUpdate:columns":p[1]||(p[1]=I=>j(g)?g.value=I:null),"disabled-delete":e(U).length===0,loading:e(B),onAdd:e(R),onDelete:$,onRefresh:e(c)},null,8,["columns","disabled-delete","loading","onAdd","onRefresh"])]),default:l(()=>[o(E,{ref_key:"tableWrapperRef",ref:x,columns:e(d),"data-source":e(k),"row-selection":e(s),loading:e(B),"row-key":"id",size:"small",pagination:e(h),scroll:e(u),class:"h-full"},null,8,["columns","data-source","row-selection","loading","pagination","scroll"]),o(ze,{visible:e(m),"onUpdate:visible":p[2]||(p[2]=I=>j(m)?m.value=I:null),"operate-type":e(D),"row-data":e(n),onSubmitted:e(b)},null,8,["visible","operate-type","row-data","onSubmitted"])]),_:1},8,["title"])])}}});export{Ze as default};
//# sourceMappingURL=index-CV0s8uqT.js.map
